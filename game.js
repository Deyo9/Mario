kaboom({
    global:true,
    fullscreen:true,
    scale: 1.3,
    debug:true, 
    clearColor: [0,0,0,1,],
})


loadSprite('block', 'https://raw.githubusercontent.com/Deyo9/Mario/main/block.png')
loadSprite('brick', 'https://raw.githubusercontent.com/Deyo9/Mario/main/brick.png')
loadSprite('coin', 'https://raw.githubusercontent.com/Deyo9/Mario/main/coin.png')
loadSprite('goomba', 'https://raw.githubusercontent.com/Deyo9/Mario/main/goomba.png')
loadSprite('goomba1', 'https://raw.githubusercontent.com/Deyo9/Mario/main/goomba.png')
loadSprite('hitblock', 'https://raw.githubusercontent.com/Deyo9/Mario/main/hitblock.png')
loadSprite('mario', 'https://raw.githubusercontent.com/Deyo9/Mario/main/mario.png')
loadSprite('mushroom', 'https://raw.githubusercontent.com/Deyo9/Mario/main/mushroom.png')
loadSprite('pipebl', 'https://raw.githubusercontent.com/Deyo9/Mario/main/pipebl.png')
loadSprite('pipebr', 'https://raw.githubusercontent.com/Deyo9/Mario/main/pipebr.png')
loadSprite('pipetl', 'https://raw.githubusercontent.com/Deyo9/Mario/main/pipetl.png')
loadSprite('pipetr', 'https://raw.githubusercontent.com/Deyo9/Mario/main/pipetr.png')
loadSprite('qblock', 'https://raw.githubusercontent.com/Deyo9/Mario/main/qblock.png')
loadSprite('dirt','https://raw.githubusercontent.com/Deyo9/Mario/main/dirt.png')
loadSprite('tree', 'https://raw.githubusercontent.com/Deyo9/Mario/main/tree.png')
loadSprite('redguy', 'https://raw.githubusercontent.com/Deyo9/Mario/main/redguy.png')
loadSprite('invizb', 'https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/invizb.png')
loadSprite('sandb', 'https://raw.githubusercontent.com/Deyo9/Mario/main/sandblock.png')
loadSprite('sands', 'https://raw.githubusercontent.com/Deyo9/Mario/main/sandstone.png')
loadSprite('cloudg', 'https://raw.githubusercontent.com/Deyo9/Mario/main/cloudgreen.png')
loadSprite('cloud', 'https://raw.githubusercontent.com/Deyo9/Mario/main/cloud.png')
loadSprite('cactus', 'https://raw.githubusercontent.com/Deyo9/Mario/main/cactus.png')
loadSprite('jumper', 'https://raw.githubusercontent.com/Deyo9/Mario/main/jumper.png')
loadSprite('water', 'https://raw.githubusercontent.com/Deyo9/Mario/main/water.png')
loadSprite('dwater', 'https://raw.githubusercontent.com/Deyo9/Mario/main/water2.png') 
loadSprite('road','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/road.png')
loadSprite('road2','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/road2.png')
loadSprite('smortgoomba','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/smortgoomba.png')
loadSprite('treeblock','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/treeblock.png')
loadSprite('leafblock','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/leafblock.png')
loadSprite('glassblock','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/glassblock.png')
loadSprite('buildingblock','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/buildingblock.png')
loadSprite('flyingguy','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/flyingguy.png')
loadSprite('cloud2','https://raw.githubusercontent.com/Deyo9/Mario/main/cloud.png')
loadSprite('truck','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/truck.png')
loadSprite('truck2','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/truck2.png')
loadSprite('truck3','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/truck3.png')
loadSprite('suprise','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/invizb.png')
loadSprite('mario-going-left','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/mariogoingleft.png')
loadSprite('mario-going-right','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/mariogoingright.png')
loadSprite('mario-crouching','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/mariocrouch.png')
loadSprite('mario-party','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/marioemote1.png')
loadSprite('mario-flex','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/marioemote2.png')
loadSprite('mario-cowboy','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/marioemote3.png')
loadSprite('car','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/cah.png')
loadSprite('portal','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/portal.png')
loadSprite('virusblock','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/virusblock.png')
loadSprite('virusblocklava','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/virusblocklava.png')
loadSprite('pillar', 'https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/pillar.png')
loadSprite('pillar2', 'https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/pillar2.png')
loadSprite('podium','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/podium.png')
loadSprite('lava','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/lava.png')
loadSprite('door','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/door.png')
loadSprite('king','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/king.png')
loadSprite('mmushroom','https://raw.githubusercontent.com/Deyo9/Mario/main/mushroom.png')
loadSprite('heart','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/heart.png')
loadSprite('moveplatform','https://raw.githubusercontent.com/Deyo9/Mario/version-2.0.0/podium.png')
loadSprite('mrwaldoa','mrwaldoa.png')
loadSprite('pressspace','pressspace.png')




 scene("game", ({level, score}) => {
   layers(['bg','obj','ui'], 'obj')

   const maps = [      
   
  
    [
        'I I',
        'I I',
        'I I',
        'I I',
        'I I',
        'I8I',
        'I I',
        'I I',
        'I I',
        'I I',
        'I I',
        'I I',
        'I I',
        'I I',
        'I I',
        'I I',
        'I I',
        'I I',
        'I I',
        'I I',
        'I I',
        'III',
        'I I',
        'I I',
        'I I',
        'I7I',
    ],

    [  '                                                                 ',  
       '                          c                              c       ',
       '   c                                                             ',
       '                                                                 ',
       '             c                         c                         ',
       '                                                                 ',
       '                                                   c             ',
       '     c                                                           ',  
       '                          c                                      ',
       '                                                                 ',
       '        $$$$$$                                                   ',
       '              $                               _     r            ',
       '       €###%###        $$$$$        €##       =                  ',
       '                      $     $                =Ł                  ', 
       '                                            =ŁŁ            -+    ',
       '   t    t     t    !           t     t     =ŁŁŁ   t        ()    ',
       '=======================     ===============ŁŁŁŁ==============    ',
       'ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ     ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ    ',
       'ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ     ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ    ',
       'ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ     ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ    ',
       'ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ     ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ    ',
       'ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ     ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ    ',
       'ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ     ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ    ',
    ],
    [
       '                                     ==                          ',
       '                                     ŁŁ                          ',
       '    c                                ŁŁ       c                  ',
       '                              c      ŁŁ                          ',
       '                     i               ŁŁ                    c     ',
       '                c                    ŁŁ      c     c             ',
       '          $$$                        ŁŁ                          ',
       '                                  r  ŁŁ                          ',
       '  c                 ####             ==          c        c      ',
       '                            c                                    ',
       '        =     =                      $$                       r  ',
       '       =Ł     Ł=         #%#         ==     €##€#                ',
       '      =ŁŁ     ŁŁ=                    ŁŁ                     -+   ',
       '     =ŁŁŁ     ŁŁŁ=    t     j  !  t  ŁŁ    t       t    _   ()   ',
       '=====ŁŁŁŁ     ŁŁŁŁ===================ŁŁ========================= ',
       'ŁŁŁŁŁŁŁŁŁ     ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ ',
       'ŁŁŁŁŁŁŁŁŁ     ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ ',
       'ŁŁŁŁŁŁŁŁŁ     ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ ',
       'ŁŁŁŁŁŁŁŁŁ     ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ ',
       'ŁŁŁŁŁŁŁŁŁ     ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ ',
       'ŁŁŁŁŁŁŁŁŁ     ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ ',
    ],
    [
        '                  c            r                  c              ',
        '      c     =                         c                     c    ',
        '            Ł                                                    ',
        '            Ł                     c                  r           ',
        '            Ł      c                         c                   ',
        '          ==Ł                  $$$$$$                            ',
        '          ŁŁŁ                             ###       c            ',
        '    c       Ł        i       ##########                      _   ',
        '            Ł                                   ####i##########  ',
        '          ==Ł            c                                       ',
        '     c    ŁŁŁ      ##%##       $$$$$$                            ',
        '            Ł$                $      $                       -+  ',
        '  t     t   Ł    t       t              t      t      t   !  ()  ',
        '============Ł===================    =============================',
        'ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ    ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ',
        'ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ    ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ',
        'ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ    ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ',
        'ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ    ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ',
        'ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ    ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ',
        'ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ    ŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁŁ',

    ],
    [   '                          S                                      ',
        '                          sS                                     ',
        '            C          $$$ sS           C                   r    ',
        '   C          r             s                                    ',
        '                            s   ##                _ C            ',
        '         C     C            s    C        sssssssssssss          ',
        '                      ##€## sS                                   ',
        '   C                 C      ss                             C     ',
        '              SSS                   S      $ $ $ $ $             ',
        '     %       Ssss                  ss                            ',
        '      H     Ss              H       s                H     -+    ',
        '      H    Ss      H        H       s        !       H  j  ()    ',
        'SSSSSSSSSSSssssssSSSSSSSSSSSSSSSSSSSsSSSSSSSSSSSSSSSSSSSSSSSSSSSS',
        'sssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss',
        'sssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss',
        'sssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss',
        'sssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss',
        'sssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss',
    ],
    [   '                                                                    ',
        '   C                               C                   C            ',
        '                        C                                       C   ',
        '         C                                                          ',
        '                                        C                           ',
        '                 C                                 C                ',
        '      C                        C                             r      ',
        '            C                                                       ',
        '                ss                        C                         ',
        '    C          ssss         C                                       ',
        '              ssssss                                 C          C   ',
        '             s $$$  s               C                               ',
        '            s$     sss                                              ',
        '           sssss     !sj    ###%€##                                 ',
        '          s$       sssss                  S                         ',
        '   H     ssss        $sss               SSs                H      -+',
        '   H                ssssss   $$$$$     Ssss    H      _    H      ()',
        'SSSSSSSSSSSSSSSSSSSSssssssSSSSSSSSSSSSSssssSSSSSSSSSSSSSSSSSSSSSSSSS',
        'ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss',
        'ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss',
        'ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss',
        'ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss',
        'ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss',
        
    ],
    [
        '                                                              C     ',
        '                     C                             C                ',
        '                                          C                         ',
        '       C                       C                           C        ',
        '                                                                    ',
        '                 C                                                  ',
        '                                              C         C           ',
        '      C                                                             ',
        '                                                                    ',
        '                       C            C                      C        ',
        '          C                                                         ',
        '                                                                    ',
        '                                            C                   C   ',
        '      C                    C                                        ', 
        '            $$$$    H        $$$$$                $$$$$$            r                  r                              r                                r              r                 r             r                 r                     r                       r        r                r      r           r             r            r                r              r                  r                         r                          r           r                r                                 ',            
        '        H  $    $   H    H  $     $    H         $      $      r -+    r         r            r           r              r           r            r             r             r            r                r                        r                      r               r               r        r                   r              r               r                              r                  r            r                r                   r                r               r ',
        '        H           H    H             H       H           H     () ',
        'SSSSSSSSSSSS    SSSSSSSSSSSSS     SSSSSSSSSSSSSSSS       SSSSSSSSSSS',
        'sssssssssss     sssssssssssss      ssssssssssssss         ssssssssss',
        'ssssssssss       ssssssssss          sssssssssss    SS     sssssssss',
        'sssssssss         sssssss             ssssssss      ss      ssssssss',
        'sssssss            sssss                sssss       ss       sssssss',
        'sssssss            ssss                 sssss       ss       sssssss',
        'wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww',
        'WWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWWW',
    ],
    [
        '            %    $$$$$$ C            $$                           ',  
        '                $         ##########   $    C            C        ',  
        '                    ###   BBBBGBBBBB                              ',  
        '     C                 C  BBBBBBBGBB C  ###    C             F    ',  
        '        ##########        BBGBBBBBBB            ##########        ',
        '        BBBBBBBBBB        BBBBBBGBBB     F      BBBGBBBGBB        ',  
        '        BBBGBBBBBB        BBGBBBBBBB        C   BGBBBBBBBB        ',  
        '  C     BBBBBBBGBB        BBBBBBGBBB            BBBBBBGBBB   C    ',  
        '        BBGBBB####        BBBGBBBBBB   lll      BBGBBBBB€B        ',  
        '        BBBBBBGBBB        BBBBBBGBBB  lllll   C BBBBBBBGBB        ',  
        '        BBGBBBBBBB    C   BBBBBBBBBB lllllll    BBBBBBBBBB  F     ',  
        '    C   BBBBBBBGBB        BBGBB#####  lllll     BBGBBB####      C ',  
        '        ###GBBBBBB        BBBBBBBBBB    T       BBBBBBBGBB        ',  
        '        BBBBBBBBBB        BBBBBBGBBB    T       BBGBBBBBBB      -+',  
        '        BBBBBBBBBB   g    BBBBBBBBBB    T       BBBBBBBBBB    f ()',  
        'RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR',
        'šššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššš',
        'šššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššš',
        'šššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššš',
        'šššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššš',
        'šššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššš',
      ],
      [
        '                                                                           ł                                                                           ł                                                                                                         ł                                                         ł                                                  ł                                                                                                  ł         ',
        '                                                                                     ',
        '                                                                                                               ł                                                                                                          ł                                                                                                                          ł                                                                                                                                                 ł            ',
        '       ł                                                                             ',
        '                                         ł                                                                                                                                     ł                                                                                                            ł                                                                                                                                                                   ł                                             ',
        '                                                                                     ',
        '                                                                                     ',
        '                                                                                                                              ł                                                                                                               ł                                                                        ł                                                                                ł                                                                     ł                              ',
        '                                                              F                      ',
        '                                                                                     ',
        '                                                                                  ł                                                                   ł                                                          ł                                                      ł                                                                                   ł                                                                                     ł                                                           ł',
        '     ł                                 F                                         F   ',
        '       ##%##                                  $$$$$            -+                    ',
        '                    F                        $                 ()                    ',
        '                                            $   #   đ                                ',
        '                 g                          _   F                                    ',
        'ß                                                                                    ',
        '                            Đ                                                        ',
        '                                                                                     ',
        '                                                                                     ',
        '                                                                                     ',
        '                                                                                     ',
        '                                                                                     ',
        '                                                                                     ',
        '                                                                                     ',
        '                                                                                     ',
        '                                                                                     ',
        'ččččččččččččččččččččččččččččččččččččččččččččččččččččččččččččččččččččččččččččččččččččč',
        'RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR',
        'ššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššš',
        'ššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššš',
        'ššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššš',
        'ššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššš',
        'ššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššš',
    ],
    [   '                                                     IIII         I  ',
        '                                                        I         I  ',
        '                            i      C             C      I         I  ',
        '                                         F              I         I  ',
        '                   C               $$                   I         I  ',
        '        C                            $       C          I  F      I  ',
        '                          ######  ##  $                 I         I                      F ',
        '                          BBBBBBBBB########  #######BB###IIIIIIIIIIIIIIIIIIIIII ',
        '                          BBBBBBBBB########  ###BBGBBBGB#            ',  
        '        BBBBBBBBBB        BBBBBB###########$$$$#BBBBBBBB#            ',  
        '        BBBBBBBGBB   F    BBBBBBBBB########$$$$#BBBBBGBB#   C        F',  
        '   C    BBGBBBBBBB        BBBBBBBBB########$$$$##BB######            ',  
        '        BBBBBBGBBB        ####BBBBB#############BBBBBBGB#            ',  
        '        BBGBBBBBBB        BBBBBBBBB#############BBBBBBBB#      P     ',  
        '        BBBBBBBGBB        BBBBBBBBB##################BB##            ',  
        '        BBBGBBBBBB    C   BBBBB#################BBBBBBGB#            ',  
        '        BBBBBBBBBB        BBBB#BBBB#############BGBBBBBB#  F         ',  
        '        BBBBBBBBBB    f   BBB#BBBBB#############BBBBBBBBB            ',
        'RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR',
        'ššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššš',
        'ššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššš',
        'ššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššš',
        'ššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššš',
        'ššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššššš',
], 
 [
    '                                                                      ',
    '                                                                      ',
    '                                                                      ',
    '                                                      %               ',
    '                                                                      ',
    '                                                                      ',
    '                                                                 1    ',
    '                                                                      ',
    '                                              %                       ',
    '                                                                      ',
    '                                                              Dnnnnnnn',
    '                        %                             D       p       ',
    '                                                      p       p       ',
    '             nnnn             D                   r   p       p       ',
    '          D            nnn    p       D       D       p       p       ',
    '     D    p        D          p       p       p       p       p       ',
    '     p    p        p          p       p       p       p       p       ',
    '     p    p        p          p       p       p       p       p   ž                            ž                               ž                                ž                              ž                         ž                               ž',
    'nnnnnMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM',
    'mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm',
    'mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm',
    'mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm',
    'mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm',
    'mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm',
],
[
    '                                 I                      ',
    '                          5      I                      ',
    '                                 I                      ',
    '          K                      I                      ',
    '                                 I                      ',
    '                                 I                     ',
    '                                 I                      ',
    '                                 I                      ',
    '                                 I                      ',
    '                                 I                      ',
    '                                 I                                       r                                   r                               r                    r                     r                  r                r                 r               r              r                r              r               r           ',
    '                          nn     I                      ',
    '                                 I                           r                           r                             r                             r                             r                         r                          r                            r                       r                                 r  ',
    '                                 I                                                                                                                                                                                                                                                                                                        4  ',
    '6666666                 nnnnnn   I                       ',
    '                                 I                                           r                                                            r                                                   r                       r                                  r                                                 r    ',
    '                                 I                                                           ž                                                                         ž                                                      ž                                                                      ž                                                    ž                                                                ž                                              ž                                                                     ž                       ',
    '                     nnnnnnnnnnnnI                      ',
    'MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM',
    'mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm',
    'mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm',
    'mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm',
    'mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm',
    'mmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmmm',
],

  ] 

      
       

       
       
       
      
       const levelCfg = {
       width: 20,
       height: 20,
       '=': [sprite('block'), solid()],
       '$': [sprite('coin'), 'coin'],
       '#': [sprite('brick'), solid()],
       '%': [sprite('qblock'), solid(), 'mushroom-qblock'],
       '(': [sprite('pipebl'), solid(), scale(0.5)],
       ')': [sprite('pipebr'), solid(), scale(0.5)],
       '-': [sprite('pipetl'), solid(), scale(0.5), 'pipe'],
       '+': [sprite('pipetr'), solid(), scale(0.5), 'pipe'],
       '!': [sprite('goomba'), 'enemy',body()],
       '_': [sprite('goomba1'),'enemy',body()],
       '*': [sprite('mushroom'), 'mushroom',body()],
       '4': [sprite('mmushroom'),'mmushroom',scale(2)],
       '€': [sprite('qblock'), solid(), 'coin-qblock'],
       '&': [sprite('hitblock'),solid()],
       'Ł': [sprite('dirt'), solid()],
       't': [sprite('tree') ],
       'r': [sprite('redguy'), 'danger'],
       'i': [sprite('invizb'),solid(),'coin-qblock'],
       'I': [sprite('invizb'),solid()],
       'S': [sprite('sands'), solid()],
       's': [sprite('sandb'), solid()],
       'c': [sprite('cloudg')],
       'C': [sprite('cloud')],
       'H': [sprite('cactus')],
       'j': [sprite('jumper'), 'bad',body()],
       'w': [sprite('water')],
       'W': [sprite('dwater')],
       'f': [sprite('car'), solid(), body(),'vehicle',scale(1)],
       'R': [sprite('road'),solid()],
       'š': [sprite('road2'),solid()],
       'g': [sprite('smortgoomba'),'enemy',body()],
       'F': [sprite('flyingguy'),'danger'],
       'l': [sprite('leafblock')],
       'T': [sprite('treeblock')],
       'G': [sprite('glassblock')],
       'B': [sprite('buildingblock')],
       'ł': [sprite('cloud2'), 'speedy', scale(4)],
       'ß': [sprite('truck'),solid()],
       'Đ': [sprite('truck2'),solid()],
       'đ': [sprite('truck3'),solid()],
       'č': [sprite('suprise'),'instdeath'],
       'P': [sprite('portal'),'portal'],
       'M': [sprite('virusblocklava'),'instdeath',scale(2)],
       'm': [sprite('virusblock')],
       'p': [sprite('pillar'),solid()],
       'D': [sprite('pillar2'),solid(),scale(1)],
       'n': [sprite('podium'),solid()],
       'ž': [sprite('lava'),'danger'],
       '1': [sprite('door'),scale(2),'door'],
       'K': [sprite('king'),scale(5)],
       '5': [sprite('heart'),scale(2),'portal'],
       '6': [sprite('moveplatform'),solid(),'zplatform'],
       '7': [sprite('pressspace')],
       '8': [sprite('mrwaldoa')],
        }

    
       

   const gameLevel = addLevel(maps[level],levelCfg)
  
   const scoreLabel = add([
       text(score),
       pos(6,70),
       layer('ui'),
       {
           value: score,
       }
   ])

    add([text('level' + parseInt(level + 1)), pos(40,70)])

   function big(){
       let timer = 0
       let isBig = false
       return{
           update(){
               if(isBig) {    
                   timer -= dt()
                   if(timer <= 0){
                       this.smallify()
                   }
               }
           },
           isBig(){
               return isBig
           },
           smallify(){
             CURRENT_JUMP_FORCE= JUMP_FORCE
               this.scale = vec2(1)
               timer = 0
               isBig = false
           },
           biggify(time){
             CURRENT_JUMP_FORCE= BIG_JUMP_FORCE
               this.scale = vec2(2)
               timer = time
               isBig = true
           }
       }
   }

  


   const player = add([
     sprite('mario'), solid(),
     pos(50,200),
     body(),
     big(),
     origin('bot') 
   ])

   action('bad', (b)=>{
    if (b.grounded()){
        isJumping = true
        b.jump(CURRENT_JUMP_FORCE)
    }
        b.move(-JUMPER_SPEED,0)
   })


   action('vehicle', (v)=>{
       v.move(-BIG_MOVE_SPEED,0)
   })

   action('speedy', (s)=>{
       s.move(-CLOUD_MOVE_SPEED,0)
   })

   action('zplatform', (z)=>{
       z.move(50,0.00000001)
   })

   action('mushroom', (m)=>{
       m.move(35,0)
   })

   action('mmushroom', (m)=>{
    m.move(-90,0)
})

   action('enemy' , (e)=>{
       e.move(-ENEMY_SPEED,0)
   })

   action('danger' , (d)=>{
       d.move(-DANGER_SPEED,0)
   })

   action('fall', (f)=>{
       f.move(0,200)
   })

  

   player.on("headbump", (obj)=>{
       if (obj.is('coin-qblock')){
           gameLevel.spawn('$',obj.gridPos.sub(0,1))
           destroy(obj)
           gameLevel.spawn('&',obj.gridPos.sub(0.0))
       }
       if (obj.is('mushroom-qblock')){
        gameLevel.spawn('*',obj.gridPos.sub(0,1))
        destroy(obj)
        gameLevel.spawn('&',obj.gridPos.sub(0.0))
       }
       if(obj.is('invizb')){
           gameLevel.spawn('$',obj.gridPos.sub(0,1))
           destroy(obj)
           gameLevel.spawn('&',obj.gridPos.sub(0,0))
       }
   })
    
   player.action(()=>{
       if(player.grounded()){
           isJumping = false
       }
   })

   player.collides('enemy', (e)=>{
       if(isJumping){
         destroy(e)
        }else{
         go('lose', {score: scoreLabel.value})
       }
    
   })


   player.collides('rage', (r)=>{
       go('lose', {score:scoreLabel.value})
   })

   player.collides('danger', (d)=>{
       go('lose', {score:scoreLabel.value})
   })

   player.collides('fall', (f)=>{
    go('lose', {score:scoreLabel.value})
})

    player.collides('bad', (b)=>{
    go('lose', {score:scoreLabel.value})
   })

    player.collides('instdeath', (i)=>{
        go('lose', {score:scoreLabel.value})
    })
   

   player.collides('mushroom', (m)=>{
       destroy(m)
       player.biggify(5)
   })

   player.collides('mmushroom', (m)=>{
    destroy(m)
    player.biggify(5)
})

   

   

   player.collides('coin', (c)=> {
       destroy(c)
       scoreLabel.value++
       scoreLabel.text=scoreLabel.value
   })

   player.action(()=>{
       camPos(player.pos)
       if (player.pos.y >= VOID_DEATH){
           go('lose', {score: scoreLabel.value})
       }
   })

   

    const MOVE_SPEED = 130
    const CLOUD_MOVE_SPEED= 169
    const BIG_MOVE_SPEED= 200
    const JUMP_FORCE = 400
    let CURRENT_JUMP_FORCE= JUMP_FORCE
    const BIG_JUMP_FORCE= 500
    const ENEMY_SPEED= 40
    const DANGER_SPEED= 90
    const JUMPER_SPEED= 69
    let isJumping= true
    const VOID_DEATH= 1000
    

    player.collides('pipe', () =>{
        keyPress('down', () =>{
            go('game', {
                level: (level + 1) % maps.length,
                score: scoreLabel.value
            })
        })
    })

    player.collides('door', () =>{
        keyPress('up', () =>{
            go('game', {
                level: (level + 1) % maps.length,
                score: scoreLabel.value
            })
        })
    })
   
    player.collides('portal', () =>{
            go('game', {
                level: (level + 1) % maps.length,
                score: scoreLabel.value
            })
    })
    
    keyDown('left', ()=> {
        player.changeSprite('mario-going-left')
        player.move(-MOVE_SPEED,0)
    })

    keyDown('right', ()=> {
        player.changeSprite('mario-going-right')
        player.move(MOVE_SPEED,0)
    })

    keyDown('space', ()=> {
        if (level == 0){

            go('game', {
                level: (level+1) % maps.length,
                score: 0
            })
            
        }

        if (player.grounded()){
            isJumping = true
            player.jump(CURRENT_JUMP_FORCE)
        }
         
        
    })


    keyPress('down', ()=>{
        player.changeSprite('mario-crouching')
    })

    keyPress('1', ()=>{
        player.changeSprite('mario-party')
    })

    keyPress('2', ()=>{
        player.changeSprite('mario-flex')
    })

    keyPress('3', ()=>{
        player.changeSprite('mario-cowboy')
    })

    keyRelease('left',()=>{
        player.changeSprite('mario')
    })

    keyRelease('right',()=>{
        player.changeSprite('mario')
    })

    keyRelease('down',()=>{
        player.changeSprite('mario')
    })

})

scene('lose', ({score}) => {
    add([text(score,32), origin('center'), pos(width()/2,height()/2)])
})

start("game", {level: 0, score:0})



